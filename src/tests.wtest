import disparo.*
import jugador.*
import enemigos.*
import juego.*
import nivelDeJuego.*
import wollok.game.*

describe "Jugador" {
	
	
	method initialize(){
	 juego.comenzar()
	}
	
	
	test "El jugador dispara a un enemigo y aumenta su puntuacion"{
		const enemigo = new Enemigo1(position = game.at(5,9),posicionIzquierda = 5, posicionDerecha = 9, image = "invader1.gif", puntos = 100)
		game.addVisual(enemigo)
		jugador.disparar()
		juego.eliminarEnemigo(enemigo)
		assert.equals(100,juego.puntuacion())
	}
	
	
	test "El jugador dispara"{
		jugador.disparar()
		assert.that(game.hasVisual(jugador.disparo()))
		
	}
		
	
}

describe "Disparo" {
	
	
	method initialize(){
	 juego.comenzar()
	 
	}
	
	
	test "El disparo sale de escena al pasar los limites"{
		const disparo = new DisparoJugador(position = 13 , image = "shot1.gif")
		game.addVisual(disparo)
		disparo.mover(disparo)
		assert.that(!game.hasVisual(disparo))
	}
	
	
	test "El disparo al impactar un enemigo sale de escena"{
       const enemigo = new Enemigo1(position = game.at(6,1),posicionIzquierda = 5, posicionDerecha = 9, image = "invader1.gif", puntos = 100)
       game.addVisual(enemigo)
       jugador.disparar()
       jugador.impactarDisparo()
       assert.that(!game.hasVisual(jugador.disparo()))       
		
	}
		
	
}



describe "Enemigo" {
	
	
	method initialize(){
	 juego.comenzar()
	 
	}
	
	
	test "El enemigo esta en la pantalla"{
     assert.that(game.hasVisual(nivelUno.unEnemigo()))
	}
	
	
	test "El enemigo dispara"{
	  (nivelUno.unEnemigo()).disparar()
	  assert.that(game.hasVisual((nivelUno.unEnemigo()).disparo()))
	}
	
	test "El enemigo al recibir un disparo desparece"{
	   const enemigo = new Enemigo1(position = game.at(6,1),posicionIzquierda = 5, posicionDerecha = 9, image = "invader1.gif", puntos = 100)
       game.addVisual(enemigo)
       jugador.disparar()
       jugador.impactarDisparo()
       assert.that(!game.hasVisual(enemigo))
	}
	
		
	
}
